# Streaming Service for Local Server

ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน ัััะธะผะธะฝะณะพะฒัะน ัะตัะฒะธั ะดะปั ะปะพะบะฐะปัะฝะพะณะพ ัะตัะฒะตัะฐ ั ะฟะพะดะดะตัะถะบะพะน YouTube, Rutube, VK, Kinopoisk ะธ ะดััะณะธั ะฟะปะฐััะพัะผ.

## ๐ ะะพะทะผะพะถะฝะพััะธ

- **ะะฝะพะถะตััะฒะตะฝะฝัะต ะธััะพัะฝะธะบะธ**: YouTube, Rutube, VK, Kinopoisk ะธ ะดััะณะธะต ัะตัะตะท yt-dlp
- **ะะฒัะพะผะฐัะธัะตัะบะฐั ะทะฐะณััะทะบะฐ**: ะคะพะฝะพะฒะฐั ะพะฑัะฐะฑะพัะบะฐ ะฒะธะดะตะพ ะฒ ะพัะตัะตะดะธ
- **HLS ัััะธะผะธะฝะณ**: ะกะพะฒัะตะผะตะฝะฝัะน ัะพัะผะฐั ะดะปั ะฐะดะฐะฟัะธะฒะฝะพะณะพ ัััะธะผะธะฝะณะฐ
- **ะะตะฑ-ะธะฝัะตััะตะนั**: ะกะพะฒัะตะผะตะฝะฝัะน React ััะพะฝัะตะฝะด
- **REST API**: ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน .NET Core API
- **ะะฐะทะฐ ะดะฐะฝะฝัั**: PostgreSQL ะดะปั ััะฐะฝะตะฝะธั ะผะตัะฐะดะฐะฝะฝัั
- **Docker**: ะะพะปะฝะฐั ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั ะดะปั ะฟัะพััะพะณะพ ัะฐะทะฒะตัััะฒะฐะฝะธั

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โ   Frontend  โ    โ   Backend   โ    โ  PostgreSQL โ
โ   (React)   โโโโโบโ  (.NET Core)โโโโโบโ   Database  โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
       โ                   โ                   โ
       โ                   โผ                   โ
       โ            โโโโโโโโโโโโโโโ            โ
       โ            โ   Redis     โ            โ
       โ            โ   Cache     โ            โ
       โ            โโโโโโโโโโโโโโโ            โ
       โ                   โ                   โ
       โผ                   โผ                   โผ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โ    Nginx    โ    โ   yt-dlp    โ    โ   FFmpeg    โ
โ   Reverse   โ    โ  Downloader โ    โ  Converter  โ
โ   Proxy     โ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโ
```

## ๐ ะขัะตะฑะพะฒะฐะฝะธั

- Docker ะธ Docker Compose
- Ubuntu Server (ัะตะบะพะผะตะฝะดัะตััั)
- ะะธะฝะธะผัะผ 4GB RAM
- 200GB ัะฒะพะฑะพะดะฝะพะณะพ ะผะตััะฐ ะดะปั ะฒะธะดะตะพ

## ๐๏ธ ะฃััะฐะฝะพะฒะบะฐ ะธ ัะฐะทะฒะตัััะฒะฐะฝะธะต

### 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั

```bash
git clone <repository-url>
cd StreamingServiceForLocalServer
```

### 2. ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะฒ ะบะพัะฝะตะฒะพะน ะดะธัะตะบัะพัะธะธ:

```env
# Database
POSTGRES_DB=streamservice
POSTGRES_USER=streamuser
POSTGRES_PASSWORD=streampass123

# Storage
VIDEO_STORAGE_PATH=/var/lib/streamservice/videos
MAX_STORAGE_GB=200

# API
API_BASE_URL=http://localhost
```

### 3. ะะฐะฟััะบ ัะตัะฒะธัะพะฒ

```bash
# ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
docker-compose up -d --build

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ
docker-compose ps

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f
```

### 4. ะะพัััะฟ ะบ ะฟัะธะปะพะถะตะฝะธั

- **ะะตะฑ-ะธะฝัะตััะตะนั**: http://localhost:8080
- **API ะดะพะบัะผะตะฝัะฐัะธั**: http://localhost:8080/swagger
- **ะะฐะทะฐ ะดะฐะฝะฝัั**: localhost:5433
- **Redis**: localhost:6380

## ๐ ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะะพะฑะฐะฒะปะตะฝะธะต ะฒะธะดะตะพ

1. ะัะบัะพะนัะต ะฒะตะฑ-ะธะฝัะตััะตะนั
2. ะะตัะตะนะดะธัะต ะฝะฐ ะฒะบะปะฐะดะบั "Add Video"
3. ะััะฐะฒััะต URL ะฒะธะดะตะพ (YouTube, Rutube, VK, etc.)
4. ะะฐะถะผะธัะต "Add Video"

### ะัะพัะผะพัั ะฒะธะดะตะพ

1. ะะตัะตะนะดะธัะต ะฒ "Library"
2. ะะฐะนะดะธัะต ะณะพัะพะฒะพะต ะฒะธะดะตะพ (ััะฐััั "Ready")
3. ะะฐะถะผะธัะต "Play" ะธะปะธ ะฝะฐ ะฝะฐะทะฒะฐะฝะธะต ะฒะธะดะตะพ

### API Endpoints

```bash
# ะะพะปััะธัั ัะฟะธัะพะบ ะฒะธะดะตะพ
GET /api/videos

# ะะพะฑะฐะฒะธัั ะฒะธะดะตะพ
POST /api/videos
{
  "url": "https://www.youtube.com/watch?v=...",
  "title": "Optional custom title"
}

# ะะพะปััะธัั ััะฐััั ัะธััะตะผั
GET /api/videos/status

# ะกััะธะผะธะฝะณ ะฒะธะดะตะพ
GET /api/videos/{id}/stream
```

## ๐ง ะะพะฝัะธะณััะฐัะธั

### ะะฐัััะพะนะบะฐ Nginx

ะคะฐะนะป `docker/nginx.conf` ัะพะดะตัะถะธั ะบะพะฝัะธะณััะฐัะธั ะดะปั:
- ะัะพะบัะธัะพะฒะฐะฝะธั API ะทะฐะฟัะพัะพะฒ
- ะกััะธะผะธะฝะณะฐ ะฒะธะดะตะพ
- ะััะธัะพะฒะฐะฝะธั
- Rate limiting

### ะะฐัััะพะนะบะฐ ะฑะฐะทั ะดะฐะฝะฝัั

ะคะฐะนะป `docker/init-db.sql` ัะพะทะดะฐะตั:
- ะขะฐะฑะปะธัั `videos` ะดะปั ะผะตัะฐะดะฐะฝะฝัั
- ะขะฐะฑะปะธัั `users` ะดะปั ะฑัะดััะตะน ะฐััะตะฝัะธัะธะบะฐัะธะธ
- ะะฝะดะตะบัั ะดะปั ะพะฟัะธะผะธะทะฐัะธะธ

### ะะณัะฐะฝะธัะตะฝะธั ััะฐะฝะธะปะธัะฐ

ะ `docker-compose.yml` ะฝะฐัััะพะตะฝะพ ะพะณัะฐะฝะธัะตะฝะธะต ะฒ 200GB:
```yaml
environment:
  - Storage__MaxSizeGB=200
```

## ๐จ ะะพะฝะธัะพัะธะฝะณ ะธ ะปะพะณะธ

### ะัะพัะผะพัั ะปะพะณะพะฒ

```bash
# ะะพะณะธ ะฑัะบะตะฝะดะฐ
docker-compose logs -f backend

# ะะพะณะธ ััะพะฝัะตะฝะดะฐ
docker-compose logs -f frontend

# ะะพะณะธ ะฑะฐะทั ะดะฐะฝะฝัั
docker-compose logs -f postgres
```

### ะะพะฝะธัะพัะธะฝะณ ัะตััััะพะฒ

```bash
# ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะดะธัะบะฐ
docker system df

# ะกัะฐัะธััะธะบะฐ ะบะพะฝัะตะนะฝะตัะพะฒ
docker stats
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะตะบะพะผะตะฝะดะฐัะธะธ ะดะปั ะฟัะพะดะฐะบัะตะฝะฐ

1. **ะะทะผะตะฝะธัะต ะฟะฐัะพะปะธ** ะฒ `docker-compose.yml`
2. **ะะฐัััะพะนัะต SSL** ั Let's Encrypt
3. **ะะณัะฐะฝะธัััะต ะดะพัััะฟ** ะบ API
4. **ะะฐัััะพะนัะต ะฑัะฐะฝะดะผะฐััั**
5. **ะะตะณัะปััะฝะพ ะพะฑะฝะพะฒะปัะนัะต** ะบะพะฝัะตะนะฝะตัั

### ะะฐัััะพะนะบะฐ SSL

```bash
# ะกะพะทะดะฐะฝะธะต SSL ัะตััะธัะธะบะฐัะพะฒ
sudo certbot certonly --standalone -d your-domain.com

# ะะฑะฝะพะฒะปะตะฝะธะต nginx.conf ะดะปั HTTPS
```

## ๐ ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### ะัะพะฑะปะตะผั ั ะทะฐะณััะทะบะพะน ะฒะธะดะตะพ

```bash
# ะัะพะฒะตัะบะฐ yt-dlp
docker-compose exec backend yt-dlp --version

# ะัะพะฒะตัะบะฐ FFmpeg
docker-compose exec backend ffmpeg -version

# ะัะพัะผะพัั ะปะพะณะพะฒ ะทะฐะณััะทะบะธ
docker-compose logs -f backend | grep "VideoDownloadService"
```

### ะัะพะฑะปะตะผั ั ะฑะฐะทะพะน ะดะฐะฝะฝัั

```bash
# ะะพะดะบะปััะตะฝะธะต ะบ ะฑะฐะทะต
docker-compose exec postgres psql -U streamuser -d streamservice

# ะัะพะฒะตัะบะฐ ัะฐะฑะปะธั
\dt

# ะัะพะฒะตัะบะฐ ะดะฐะฝะฝัั
SELECT * FROM videos LIMIT 5;
```

### ะัะพะฑะปะตะผั ั ัะตััั

```bash
# ะัะพะฒะตัะบะฐ ะฟะพััะพะฒ
netstat -tulpn | grep :80
netstat -tulpn | grep :5432

# ะัะพะฒะตัะบะฐ ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose ps
```

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะะฟัะธะผะธะทะฐัะธะธ

1. **ะััะธัะพะฒะฐะฝะธะต**: Redis ะดะปั ัะตััะธะน ะธ ะบััะฐ
2. **ะกะถะฐัะธะต**: Nginx gzip ะดะปั ััะฐัะธัะตัะบะธั ัะฐะนะปะพะฒ
3. **CDN**: ะะฐัััะพะนะบะฐ CDN ะดะปั ะฒะธะดะตะพ ัะฐะนะปะพะฒ
4. **ะะฐะปะฐะฝัะธัะพะฒะบะฐ**: ะะฐัััะพะนะบะฐ load balancer

### ะะพะฝะธัะพัะธะฝะณ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

```bash
# ะฃััะฐะฝะพะฒะบะฐ Grafana
docker run -d --name=grafana -p 3000:3000 grafana/grafana

# ะฃััะฐะฝะพะฒะบะฐ Prometheus
# (ะดะพะฑะฐะฒะธัั ะฒ docker-compose.yml)
```

## ๐ ะะฑะฝะพะฒะปะตะฝะธั

### ะะฑะฝะพะฒะปะตะฝะธะต ะฟัะธะปะพะถะตะฝะธั

```bash
# ะััะฐะฝะพะฒะบะฐ ัะตัะฒะธัะพะฒ
docker-compose down

# ะะฑะฝะพะฒะปะตะฝะธะต ะบะพะดะฐ
git pull

# ะะตัะตัะฑะพัะบะฐ ะธ ะทะฐะฟััะบ
docker-compose up -d --build
```

### ะะตะทะตัะฒะฝะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต

```bash
# ะะตะทะตัะฒะฝะฐั ะบะพะฟะธั ะฑะฐะทั ะดะฐะฝะฝัั
docker-compose exec postgres pg_dump -U streamuser streamservice > backup.sql

# ะะตะทะตัะฒะฝะฐั ะบะพะฟะธั ะฒะธะดะตะพ
tar -czf videos_backup.tar.gz /var/lib/streamservice/videos
```

## ๐ค ะะบะปะฐะด ะฒ ะฟัะพะตะบั

1. Fork ัะตะฟะพะทะธัะพัะธั
2. ะกะพะทะดะฐะนัะต feature branch
3. ะะฝะตัะธัะต ะธะทะผะตะฝะตะฝะธั
4. ะกะพะทะดะฐะนัะต Pull Request

## ๐ ะะธัะตะฝะทะธั

MIT License - ัะผ. ัะฐะนะป LICENSE ะดะปั ะดะตัะฐะปะตะน.

## ๐ ะะพะดะดะตัะถะบะฐ

- ะกะพะทะดะฐะนัะต Issue ะฒ GitHub
- ะัะพะฒะตัััะต ะดะพะบัะผะตะฝัะฐัะธั
- ะะพัะผะพััะธัะต ะปะพะณะธ ะดะปั ะดะธะฐะณะฝะพััะธะบะธ

---

**ะัะธะผะตัะฐะฝะธะต**: ะญัะพั ัะตัะฒะธั ะฟัะตะดะฝะฐะทะฝะฐัะตะฝ ะดะปั ะปะธัะฝะพะณะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั. ะฃะฑะตะดะธัะตัั, ััะพ ะฒั ัะพะฑะปัะดะฐะตัะต ััะปะพะฒะธั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฟะปะฐััะพัะผ, ั ะบะพัะพััั ะทะฐะณััะถะฐะตัะต ะบะพะฝัะตะฝั. 